<link href="~/Content/header.css" type="text/css" rel="stylesheet" />
@model IEnumerable<CellPhoneX.Models.product>
@*<div class="header">
        <div class="navbar navbar-fixed-top" >
            <div class="container">
                <div class="navbar-header" style="background-color: #d70018; color: white">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="~/Home/Index">
                        <img src="~/Content/images/logo.png" style="width:100%; height:100%"/>
                    </a>
                </div>
                <div class="input-group rounded">
                    <input type="search" class="form-control rounded" placeholder="Bạn cần tìm gì ..." aria-label="Search" aria-describedby="search-addon" />
                    <span class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search"></i>
                    </span>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li>@Html.ActionLink("Home", "Index", "Home")</li>
                        <li>@Html.ActionLink("About", "About", "Home")</li>
                        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>*@
<div class="header">
    <section id="menu">

        <div class="logo">
            <img src="~/Content/images/logo.png" />
        </div>

        <form class="form-search">
            <div class="search-bar">
                <i class="fa fa-search"></i>
                <input type="search" class="form-control" placeholder="Bạn cần tìm gì?">
            </div>
            <div class="search-box">
                @*<ul>
                    <li>
                        <a>
                            <div class="phone-image"></div>
                            <div class="phone-info">
                                <div class="phone-name"></div>
                                <div class="phone-price"></div>
                            </div>
                        </a>
                    </li>
                </ul>*@
            </div>
        </form>

        <div id="overlay"></div>

        <div class="navbar-menu">
            <ul>
                <li>@Html.ActionLink("Trang chủ", "Index", "Home")</li>
                <li>@Html.ActionLink("Sản phẩm", "About", "Home")</li>
                <li>@Html.ActionLink("Tài khoản", "Contact", "Home")</li>
            </ul>
        </div>
    </section>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>
    
    @*$(".search-bar").click(function () {
        $('#overlay').css({display: "block"});
    })*@

    $('#overlay').click(function () {
        $('#overlay').css({display: "none" });
    })

    $(".search-bar").keyup(function () {
        GetPhone();

        function GetPhone() {
            var strKey = $(".search-bar").focus().val;
            $.ajax(
                {
                    type: "POST",
                    url: "/Product/SearchPhone",
                    data: "{PhoneName: '" + strKey + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        var searchBox = $(".search-box");
                        searchBox.append(
                            $("<ul></ul>").append(
                                $.each(result, function (item, phone) {
                                    $.append(
                                        $("<li></li>").append(
                                            $("<li></li>").append(
                                                $("<a></a>").append(
                                                    $("<div></div>").append(
                                                        $("<img/>").attr("src", "~/Content/images/" + phone.image)
                                                    )
                                                )
                                            )
                                        )
                                    )
                                })
                            )
                        )
                        
                    }
                })
        }

    })
</script>
